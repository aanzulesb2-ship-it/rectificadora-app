<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>ERP Rectificadora Suarez</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="bg-gray-100 p-6">

<h1 class="text-3xl font-black mb-6">ERP Rectificadora Suarez</h1>

<div class="bg-white p-4 rounded shadow mb-4">
<input id="cliente" placeholder="Cliente / Motor" class="border p-2 w-full mb-2">
<button onclick="guardar()" class="bg-black text-white px-4 py-2 rounded">Guardar Orden</button>
</div>

<div id="lista" class="space-y-2"></div>

<script>
const supabase = supabaseJs.createClient(
  "https://igjaxobidxuiuokotmgx.supabase.co",
  "sb_publishable_mhmF6Re7HzkkQw-koUJ2bA_ThNnAfcW"
);

async function cargar() {
  const { data } = await supabase
    .from("orders")
    .select("*")
    .order("created_at", { ascending: true });

  const lista = document.getElementById("lista");
  lista.innerHTML = "";

  data.forEach(o => {
    lista.innerHTML += 
      <div class="bg-white p-3 rounded shadow flex justify-between">
        <span>\</span>
        <span class="text-xs text-gray-400">\</span>
      </div>
    ;
  });
}

async function guardar() {
  const cliente = document.getElementById("cliente").value;
  if (!cliente) return;

  await supabase.from("orders").insert({
    client: cliente,
    status: "pendiente"
  });

  document.getElementById("cliente").value = "";
  cargar();
}

cargar();
</script>

</body>
</html>
